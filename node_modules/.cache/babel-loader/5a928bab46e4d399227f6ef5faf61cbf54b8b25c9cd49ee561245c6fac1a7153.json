{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport useAuth from './useAuth';\nimport useApi from './useApi';\nimport { toast } from 'react-toastify';\nconst useMessages = (type, patientId) => {\n  _s();\n  const {\n    get,\n    loading,\n    error\n  } = useApi();\n  const [messages, setMessages] = useState([]);\n  const {\n    user\n  } = useAuth();\n  useEffect(() => {\n    const fetchMessages = async () => {\n      let url;\n      if (type === 'active') {\n        url = `http://localhost:8083/api/v1/messages/active`;\n      } else if (type === 'archived') {\n        url = '';\n        {/* not implemented yet */}\n      } else if (type === 'patient') {\n        url = `http://localhost:8083/api/v1/patients/messages/list`;\n        if (patientId !== null && patientId !== undefined) {\n          url += `?patientId=${patientId}`;\n        }\n      } else {\n        toast.error('An error occured');\n        return;\n      }\n      try {\n        if (user && user.token) {\n          const fetchedMessages = await get(url, user.token, {\n            'Content-Type': 'application/json'\n          });\n          if (fetchedMessages) {\n            setMessages(fetchedMessages);\n          } else {\n            toast.error('Error fetching messages');\n          }\n        }\n      } catch (apiError) {\n        toast.error('Error fetching messages');\n      }\n    };\n    fetchMessages();\n  }, [type, patientId]);\n  return {\n    messages,\n    loading\n  };\n};\n_s(useMessages, \"oBDreevB8HrXmYf3SqPTusmxkK4=\", false, function () {\n  return [useApi, useAuth];\n});\nexport default useMessages;","map":{"version":3,"names":["useState","useEffect","useAuth","useApi","toast","useMessages","type","patientId","_s","get","loading","error","messages","setMessages","user","fetchMessages","url","undefined","token","fetchedMessages","apiError"],"sources":["C:/Users/Yaman/GitHub/PatientJournalFrontend/src/hooks/useMessages.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport useAuth from './useAuth';\r\nimport useApi from './useApi';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst useMessages = (type, patientId) => {\r\n  const { get, loading, error } = useApi();\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const {user} = useAuth()\r\n\r\n  useEffect(() => {\r\n    const fetchMessages = async () => {\r\n      let url;\r\n\r\n      if (type === 'active') {\r\n        url = `http://localhost:8083/api/v1/messages/active`;\r\n      } else if (type === 'archived') {\r\n        url = ''; {/* not implemented yet */}\r\n      } else if (type === 'patient') {\r\n        url = `http://localhost:8083/api/v1/patients/messages/list`;\r\n        if (patientId !== null && patientId !== undefined) {\r\n          url += `?patientId=${patientId}`;\r\n        }\r\n      } else {\r\n        toast.error('An error occured')\r\n        return;\r\n      }\r\n      try {\r\n        if (user && user.token ) {\r\n          const fetchedMessages = await get(\r\n            url,\r\n            user.token,\r\n            { 'Content-Type': 'application/json' }\r\n          );\r\n\r\n          if (fetchedMessages) {\r\n            setMessages(fetchedMessages);\r\n          } else {\r\n            toast.error('Error fetching messages');\r\n          }\r\n        }\r\n      } catch (apiError) {\r\n        toast.error('Error fetching messages');\r\n      }\r\n    };\r\n\r\n    fetchMessages();\r\n  }, [type, patientId]);\r\n\r\n  return { messages, loading };\r\n};\r\n\r\nexport default useMessages;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,MAAMC,WAAW,GAAGA,CAACC,IAAI,EAAEC,SAAS,KAAK;EAAAC,EAAA;EACvC,MAAM;IAAEC,GAAG;IAAEC,OAAO;IAAEC;EAAM,CAAC,GAAGR,MAAM,CAAC,CAAC;EACxC,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAM;IAACc;EAAI,CAAC,GAAGZ,OAAO,CAAC,CAAC;EAExBD,SAAS,CAAC,MAAM;IACd,MAAMc,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAIC,GAAG;MAEP,IAAIV,IAAI,KAAK,QAAQ,EAAE;QACrBU,GAAG,GAAI,8CAA6C;MACtD,CAAC,MAAM,IAAIV,IAAI,KAAK,UAAU,EAAE;QAC9BU,GAAG,GAAG,EAAE;QAAE,CAAC;MACb,CAAC,MAAM,IAAIV,IAAI,KAAK,SAAS,EAAE;QAC7BU,GAAG,GAAI,qDAAoD;QAC3D,IAAIT,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAKU,SAAS,EAAE;UACjDD,GAAG,IAAK,cAAaT,SAAU,EAAC;QAClC;MACF,CAAC,MAAM;QACLH,KAAK,CAACO,KAAK,CAAC,kBAAkB,CAAC;QAC/B;MACF;MACA,IAAI;QACF,IAAIG,IAAI,IAAIA,IAAI,CAACI,KAAK,EAAG;UACvB,MAAMC,eAAe,GAAG,MAAMV,GAAG,CAC/BO,GAAG,EACHF,IAAI,CAACI,KAAK,EACV;YAAE,cAAc,EAAE;UAAmB,CACvC,CAAC;UAED,IAAIC,eAAe,EAAE;YACnBN,WAAW,CAACM,eAAe,CAAC;UAC9B,CAAC,MAAM;YACLf,KAAK,CAACO,KAAK,CAAC,yBAAyB,CAAC;UACxC;QACF;MACF,CAAC,CAAC,OAAOS,QAAQ,EAAE;QACjBhB,KAAK,CAACO,KAAK,CAAC,yBAAyB,CAAC;MACxC;IACF,CAAC;IAEDI,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACT,IAAI,EAAEC,SAAS,CAAC,CAAC;EAErB,OAAO;IAAEK,QAAQ;IAAEF;EAAQ,CAAC;AAC9B,CAAC;AAACF,EAAA,CA9CIH,WAAW;EAAA,QACiBF,MAAM,EAGvBD,OAAO;AAAA;AA4CxB,eAAeG,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}