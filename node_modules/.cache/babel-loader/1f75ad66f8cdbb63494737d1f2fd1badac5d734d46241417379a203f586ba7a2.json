{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nconst useApi = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const fetchData = async (url, method = 'GET', data = null, token = null, additionalHeaders = {}) => {\n    setLoading(true);\n    setError(null);\n    const headers = {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    };\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    const mergedHeaders = {\n      ...headers,\n      ...additionalHeaders\n    };\n    let config;\n    if (method === 'GET') {\n      config = {\n        method,\n        headers: mergedHeaders\n      };\n    } else {\n      // For non-GET requests, format the body as URL-encoded\n      const requestBody = new URLSearchParams();\n      if (data) {\n        for (const key in data) {\n          requestBody.append(key, data[key]);\n        }\n      }\n      config = {\n        method,\n        headers: mergedHeaders,\n        body: requestBody.toString()\n      };\n    }\n    try {\n      const response = await fetch(`${url}`, config);\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      const result = await response.json();\n      setLoading(false);\n      return result;\n    } catch (error) {\n      setError('An error occurred while fetching data.');\n      setLoading(false);\n      console.error('API Error:', error);\n      return null;\n    }\n  };\n  const get = async (url, token = null, additionalHeaders = {}) => {\n    return fetchData(url, 'GET', null, token, additionalHeaders);\n  };\n  const post = async (url, data, token = null, additionalHeaders = {}) => {\n    return fetchData(url, 'POST', data, token, additionalHeaders);\n  };\n  return {\n    get,\n    post,\n    loading,\n    error\n  };\n};\n_s(useApi, \"Iz3ozxQ+abMaAIcGIvU8cKUcBeo=\");\nexport default useApi;","map":{"version":3,"names":["useState","useApi","_s","loading","setLoading","error","setError","fetchData","url","method","data","token","additionalHeaders","headers","mergedHeaders","config","requestBody","URLSearchParams","key","append","body","toString","response","fetch","ok","Error","status","result","json","console","get","post"],"sources":["C:/Users/Yaman/GitHub/PatientJournalFrontend/src/hooks/useApi.js"],"sourcesContent":["import { useState } from 'react';\r\n\r\nconst useApi = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchData = async (url, method = 'GET', data = null, token = null, additionalHeaders = {}) => {\r\n    setLoading(true);\r\n    setError(null);\r\n  \r\n    const headers = {\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n    };\r\n  \r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n  \r\n    const mergedHeaders = { ...headers, ...additionalHeaders };\r\n  \r\n    let config;\r\n  \r\n    if (method === 'GET') {\r\n      config = {\r\n        method,\r\n        headers: mergedHeaders,\r\n      };\r\n    } else {\r\n      // For non-GET requests, format the body as URL-encoded\r\n      const requestBody = new URLSearchParams();\r\n  \r\n      if (data) {\r\n        for (const key in data) {\r\n          requestBody.append(key, data[key]);\r\n        }\r\n      }\r\n  \r\n      config = {\r\n        method,\r\n        headers: mergedHeaders,\r\n        body: requestBody.toString(),\r\n      };\r\n    }\r\n  \r\n    try {\r\n      const response = await fetch(`${url}`, config);\r\n  \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! Status: ${response.status}`);\r\n      }\r\n  \r\n      const result = await response.json();\r\n      setLoading(false);\r\n      return result;\r\n    } catch (error) {\r\n      setError('An error occurred while fetching data.');\r\n      setLoading(false);\r\n      console.error('API Error:', error);\r\n      return null;\r\n    }\r\n  };  \r\n\r\n  const get = async (url, token = null, additionalHeaders = {}) => {\r\n    return fetchData(url, 'GET', null, token, additionalHeaders);\r\n  };\r\n\r\n  const post = async (url, data, token = null, additionalHeaders = {}) => {\r\n    return fetchData(url, 'POST', data, token, additionalHeaders);\r\n  };\r\n\r\n  return { get, post, loading, error };\r\n};\r\n\r\nexport default useApi;"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAEhC,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGJ,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACK,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMO,SAAS,GAAG,MAAAA,CAAOC,GAAG,EAAEC,MAAM,GAAG,KAAK,EAAEC,IAAI,GAAG,IAAI,EAAEC,KAAK,GAAG,IAAI,EAAEC,iBAAiB,GAAG,CAAC,CAAC,KAAK;IAClGR,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IAEd,MAAMO,OAAO,GAAG;MACd,cAAc,EAAE;IAClB,CAAC;IAED,IAAIF,KAAK,EAAE;MACTE,OAAO,CAAC,eAAe,CAAC,GAAI,UAASF,KAAM,EAAC;IAC9C;IAEA,MAAMG,aAAa,GAAG;MAAE,GAAGD,OAAO;MAAE,GAAGD;IAAkB,CAAC;IAE1D,IAAIG,MAAM;IAEV,IAAIN,MAAM,KAAK,KAAK,EAAE;MACpBM,MAAM,GAAG;QACPN,MAAM;QACNI,OAAO,EAAEC;MACX,CAAC;IACH,CAAC,MAAM;MACL;MACA,MAAME,WAAW,GAAG,IAAIC,eAAe,CAAC,CAAC;MAEzC,IAAIP,IAAI,EAAE;QACR,KAAK,MAAMQ,GAAG,IAAIR,IAAI,EAAE;UACtBM,WAAW,CAACG,MAAM,CAACD,GAAG,EAAER,IAAI,CAACQ,GAAG,CAAC,CAAC;QACpC;MACF;MAEAH,MAAM,GAAG;QACPN,MAAM;QACNI,OAAO,EAAEC,aAAa;QACtBM,IAAI,EAAEJ,WAAW,CAACK,QAAQ,CAAC;MAC7B,CAAC;IACH;IAEA,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEf,GAAI,EAAC,EAAEO,MAAM,CAAC;MAE9C,IAAI,CAACO,QAAQ,CAACE,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAE,uBAAsBH,QAAQ,CAACI,MAAO,EAAC,CAAC;MAC3D;MAEA,MAAMC,MAAM,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MACpCxB,UAAU,CAAC,KAAK,CAAC;MACjB,OAAOuB,MAAM;IACf,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdC,QAAQ,CAAC,wCAAwC,CAAC;MAClDF,UAAU,CAAC,KAAK,CAAC;MACjByB,OAAO,CAACxB,KAAK,CAAC,YAAY,EAAEA,KAAK,CAAC;MAClC,OAAO,IAAI;IACb;EACF,CAAC;EAED,MAAMyB,GAAG,GAAG,MAAAA,CAAOtB,GAAG,EAAEG,KAAK,GAAG,IAAI,EAAEC,iBAAiB,GAAG,CAAC,CAAC,KAAK;IAC/D,OAAOL,SAAS,CAACC,GAAG,EAAE,KAAK,EAAE,IAAI,EAAEG,KAAK,EAAEC,iBAAiB,CAAC;EAC9D,CAAC;EAED,MAAMmB,IAAI,GAAG,MAAAA,CAAOvB,GAAG,EAAEE,IAAI,EAAEC,KAAK,GAAG,IAAI,EAAEC,iBAAiB,GAAG,CAAC,CAAC,KAAK;IACtE,OAAOL,SAAS,CAACC,GAAG,EAAE,MAAM,EAAEE,IAAI,EAAEC,KAAK,EAAEC,iBAAiB,CAAC;EAC/D,CAAC;EAED,OAAO;IAAEkB,GAAG;IAAEC,IAAI;IAAE5B,OAAO;IAAEE;EAAM,CAAC;AACtC,CAAC;AAACH,EAAA,CArEID,MAAM;AAuEZ,eAAeA,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}